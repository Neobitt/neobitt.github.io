<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Contador de Visitas</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #111;
      color: white;
      font-family: Arial, sans-serif;
    }
    #contador {
      font-size: 3rem;
      font-weight: bold;
      animation: rgb 3s infinite;
    }
    @keyframes rgb {
      0% { color: red; }
      33% { color: lime; }
      66% { color: cyan; }
      100% { color: red; }
    }
  </style>
</head>
<body>
  <div>
    <h1>Visitas:</h1>
    <div id="contador">Cargando...</div>
  </div>

  <script>
    const BIN_ID = "689ac212ae596e708fc7e70c";
    const ACCESS_KEY = "epes"; // Tu X-Access-Key
    const MASTER_KEY = "$2a$10$w0jFJOdeLItsGRtK6SZFtu29ZAKx5.9glTKEWG54yiBuWBXVj.gwe"; // Tu X-Master-Key
    const BIN_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;

    async function actualizarVisitas() {
      try {
        // 1. Leer visitas actuales (GET con Access Key)
        let res = await fetch(BIN_URL, {
          headers: { "X-Access-Key": ACCESS_KEY }
        });
        let data = await res.json();
        let visitas = data.record?.visitas || 0;

        // 2. Sumar 1
        visitas++;

        // 3. Guardar nuevo valor (PUT con Master Key)
        await fetch(BIN_URL, {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
            "X-Master-Key": MASTER_KEY
          },
          body: JSON.stringify({ visitas })
        });

        // 4. Mostrar en pantalla
        document.getElementById("contador").textContent = visitas;
      } catch (e) {
        document.getElementById("contador").textContent = "Error ðŸ˜¢";
        console.error("Error:", e);
      }
    }

    actualizarVisitas();
  </script>
</body>
</html>
